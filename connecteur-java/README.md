# ConnecteurINSSAPA

Spring Boot Server 


## Overview  
This server was generated by the [OpenAPI Generator](https://openapi-generator.tech) project.
By using the [OpenAPI-Spec](https://openapis.org), you can easily generate a server stub.
This is an example of building a OpenAPI-enabled server in Java using the SpringBoot framework.

The underlying library integrating OpenAPI to SpringBoot is [springfox](https://github.com/springfox/springfox)

Start your server as a simple java application

You can view the api documentation in swagger-ui by pointing to  
http://localhost:8080/


Ce projet nécessite JAVA 8, dans le path (par ex: C:\Users\jerome\.jdks\temurin-1.8.0_382\bin) pour la commande ```wsimport``` et pour compilation

## WSDL

Le contenu du dossier /src/main/java/org/wsdl est généré automaiquement à partir des fichiers contenus dans le dossier /WSDL/ServiceIdentiteCertifieeEXP


Pour générer les fichiers dans le dossier wsdl-src:
```bash
wsimport -b ".\src\main\resources\META-INF\wsdl\ServiceIdentiteCertifieeEXP\DESIR_ICIR_EXP_1.5.0.wsdl" -wsdllocation "/META-INF/wsdl/ServiceIdentiteCertifieeEXP/DESIR_ICIR_EXP_1.5.0.wsdl" -keep -verbose -extension -d wsdl-src ".\src\main\resources\META-INF\wsdl\ServiceIdentiteCertifieeEXP\DESIR_ICIR_EXP_1.5.0.wsdl"
```

## Gération d'un fichier jar
Dans IntelliJ, dans les comandes Maven Lifecycle, il faut utiliser la commande package (le fichier sera dans le dossier target)
Les tests sont lancés avant la création du .jar, si il y a au moins une erreur, il y a un échec de la création. Cela peut arriver s'il y a des problèmes d'accès au service INS de test (par ex si le certificat du serveur a expiré ou si le serveur est indisponible).
Dans ce cas pour génerer le .jar il faut commenter les tests classes de test suivantes (qio fonct des appels INS): InsApiControllerTest, ConformiteTest

## Configuration
Dans le fichier application.yaml

## URL

- https://www.ibm.com/docs/en/was-nd/8.5.5?topic=file-wsimport-command-jax-ws-applications
- http://igc-sante.esante.gouv.fr/PC/
- https://docs.spring.io/spring-boot/docs/1.4.0.RC1/reference/html/deployment-install.html#deployment-systemd-service
